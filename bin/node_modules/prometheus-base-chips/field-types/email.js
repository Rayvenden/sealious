var Promise = require("bluebird");
var FieldType= require("prometheus-resource").FieldType;



var Email = function(argument){
	this.email = argument.email;
}

Email.prototype = Object.create(FieldType.prototype)

Email.prototype.isProperValue = function(){

	console.log("email.isProperValue");

	return new Promise(function(resolve, reject){
		var address = this.email;

		var regex = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;

		if(regex.test(address)){
			reject(address + " is not valid e-mail address.");
		} else {
			resolve();
		}
	})
}

module.exports.field_type_name = "email";
module.exports.constructor = Email;

module.exports = function(field_type_email){

}