var ChipManager = require("prometheus-chip-manager");
var Promise = require("bluebird");
var ResourceManager = require("prometheus-resource-manager");
var DatabaseDirectAccess = require("prometheus-database");
var MetadataManager = require("prometheus-metadata-manager");

var DispatcherLocal = new function(){

//biz (copied) + web (copied)
	this.resources_list_by_type = function(type_name, params){
		return ResourceManager.list_by_type(type_name, params, this)
	}

//biz (copied) + web (copied)
	this.resources_create = function(type_name, body){
		return ResourceManager.create_resource(type_name, body, this);
	}

//biz + web (done)
	this.fire_service_action = function(service_name, action_name, payload){
		return ChipManager.getService(service_name).fire_action(action_name, payload);
	}

//biz (done)
	this.database_query = function(){
		console.log("database_query arguments:\n", arguments);
		return DatabaseDirectAccess.query.apply(DatabaseDirectAccess, arguments);
	}

//biz (copied) + web (copied)
	this.metadata_increment_variable = function(){
		return MetadataManager.increment_variable.apply(MetadataManager, arguments);
	}

}

module.exports = DispatcherLocal;