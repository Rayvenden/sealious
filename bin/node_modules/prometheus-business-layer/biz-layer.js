var Modules = require("prometheus-module-manager");

var LayerManager = require("prometheus-layer-manager");

function biz_rpc_server_needed(){
	if(LayerManager.isLocal()){
		return false;
	}else{
		if(LayerManager.getLayer()=="biz"){
			return true;
		}else{
			return false;
		}
	}
}

var db_accessor;

module.exports.init = function(){
	//Modules.execute_modules(["services"]);
	db_accessor = require("prometheus-database-accessor");
	db_accessor.init();
	if(biz_rpc_server_needed()){
		require("./biz-layer-jsonrpc-server.js");
	}
}
